"use strict()";var jotterDirectives=angular.module("jotterDirectives",[]),jotterServices=angular.module("jotterServices",["ngResource"]),jotterApp=angular.module("jotterApp",["jotterDirectives","jotterServices","jotterTemplates","ngAnimate","ngRoute","ngTouch"]).config(function(t){t.when("/",{templateUrl:"static/views/main.html",controller:"MainCtrl"}).when("/lists",{templateUrl:"static/views/checkLists.html",controller:"CheckListsCtrl"}).when("/lists/:id",{templateUrl:"static/views/checkList.html",controller:"CheckListCtrl"}).when("/login",{templateUrl:"static/views/login.html",controller:"LoginCtrl"}).otherwise({redirectTo:"/"})}).config(function(t){t.defaults.xsrfCookieName="csrftoken",t.defaults.xsrfHeaderName="X-CSRFToken"});angular.module("jotterTemplates",["templates/alert.html","templates/header.html"]),angular.module("templates/alert.html",[]).run(["$templateCache",function(t){t.put("templates/alert.html",'<div class="container"><div class="row" id="alert"><div class="alert fade in {{ alertStatus }} col-md-10 col-md-offset-1 col-lg-6 col-lg-offset-3" ng-show="visible"><button class="close" type="button" aria-hidden="true" ng-click="dismiss()">&times;</button><strong>{{ title }}</strong>&nbsp;{{ message }}</div></div></div>')}]),angular.module("templates/header.html",[]).run(["$templateCache",function(t){t.put("templates/header.html",'<div><h1><a href="/">Jotter</a></h1><jtr-alert></jtr-alert></div>')}]),jotterApp.controller("CheckListCtrl",["$location","$routeParams","$scope","CheckList","CheckListItem","Session",function(t,e,i,s,c,n){i.checkListItemEdit={},n.getUser({onSuccess:function(t){i.user=t}});var o=e.id;(angular.isUndefined(o)||""===o)&&(i.$root.$broadcast("alert",{title:"I can't find that list"}),t.$path("/#/lists")),i.$on("checkList:refresh",function(){i.checkList=s.get({id:o})}),i.checkList=s.get({id:o});var r=function(){var t=new c({check_list:i.checkList.id,checked:!1,description:i.checkListItemEdit.description,title:i.checkListItemEdit.title}),e=function(){i.checkList.check_list_items.push(t),i.checkListItemEdit.description="",i.checkListItemEdit.title=""},s=function(){i.$root.$broadcast("alert",{message:"and we can't save "+i.checkListItemEdit.title+" right now",status:"danger",title:"Something's wrong"})};t.$save(e,s)};i.saveCheckListItem=function(){if(angular.isDefined(i.checkListItemEdit.id)){var t=new c(i.checkListItemEdit);t.$update()}else r()},i.toggleCheckListItemChecked=function(t){t.checked=!t.checked,t=new c(t),t.$update()}}]),jotterApp.controller("CheckListsCtrl",["$location","$scope","CheckList","Session",function(t,e,i,s){e.newCheckListTitle="",s.getUser({onSuccess:function(t){e.user=t}}),e.checkLists=i.query(),e.getNumChecked=function(t){return angular.isUndefined(t)?0:_.size(_.where(t.check_list_items,{checked:!0}))},e.gotoList=function(e){t.path("/#/lists/"+e.id)},e.saveNewCheckList=function(){var t=new i({title:e.newCheckListTitle}),s=function(){e.checkLists.unshift(t),e.newCheckListTitle=""},c=function(){e.$root.$broadcast("alert",{message:"and we can't save "+e.newCheckListTitle+" right now",status:"danger",title:"Something's wrong"})};t.$save(s,c)}}]),jotterApp.controller("LoginCtrl",["$location","$scope","Session",function(t,e,i){e.password="",e.username="",i.getUser({onSuccess:function(e){e.isAuthenticated&&t.path("/#/")}}),e.login=function(){i.create({password:e.password,username:e.username},function(){e.$root.$broadcast("alert",{status:"success",title:"Welcome Back!"}),t.path("/#/")})}}]),jotterApp.controller("MainCtrl",["$location","$scope","CheckList","Session",function(t,e,i,s){s.getUser({onSuccess:function(t){e.user=t}}),e.checkLists=i.query(),e.gotoCheckList=function(e){t.path("/lists/"+e.id)}}]),jotterDirectives.directive("jtrAlert",["$timeout",function(t){return{restrict:"E",scope:!0,templateUrl:"templates/alert.html",link:function(e){e.alertStatus="alert-info",e.message="",e.title="",e.visible=!1,e.$on("alert",function(i,s){e.alertStatus="alert-"+(s.status||"info"),e.message=s.message,e.title=s.title,e.visible=!0,t(function(){e.dismiss()},6500)}),e.dismiss=function(){e.visible=!1}}}}]),jotterDirectives.directive("jtrCheckListItems",[function(){return{restrict:"A",link:function(t){t.showCheckListItemEditForm=!1,t.cancelCheckListItemEdit=function(){t.checkListItemEdit={},t.showCheckListItemEditForm=!1,t.$root.$broadcast("checkList:refresh")},t.editCheckListItem=function(e){t.checkListItemEdit=e,t.showCheckListItemEditForm=!0,e.showTools=!1},t.newCheckListItem=function(){t.editCheckListItem({})},t.hideCheckListItemTools=function(t){t.showTools=!1},t.showCheckListItemTools=function(t){t.showTools=!0}}}}]),jotterDirectives.directive("jtrHeader",["$location","Session",function(t,e){return{restrict:"E",scope:!0,templateUrl:"templates/header.html",link:function(i){e.getUser({onSuccess:function(e){i.user=e,e.isAuthenticated||t.path("/login")}})}}}]),jotterServices.factory("CheckList",["$resource",function(t){return t("/api/v1/check-lists/:id",{id:"@id"},{query:{method:"GET",params:{id:""},isArray:!0}})}]),jotterServices.factory("CheckListItem",["$resource",function(t){return t("/api/v1/check-list-items/:id",{id:"@id"},{update:{method:"PUT"}})}]),jotterServices.factory("Session",["$resource",function(t){var e=function(){var t=!1,e=!1,i="";return{isAuthenticated:t,isSet:e,username:i,setFromResource:function(t){this.isAuthenticated=t.isAuthenticated,this.isSet=!0,this.username=t.username}}},i=e(),s=t("/api/v1/sessions",{},{create:{method:"POST"},"delete":{method:"DELETE"},get:{method:"GET"}});return{create:function(){var t=arguments[0]||{},e=arguments[1]||function(){},c=arguments[2]||function(){},n=function(t){i.setFromResource(t),e(t)},o=function(t){c(t)};s.create(t,n,o)},"delete":function(){var t=arguments[1]||function(){},e=arguments[2]||function(){},c=function(e){i.setFromResource(e),t(e)},n=function(t){e(t)};s.delete(c,n)},getUser:function(t){t=t||{},i.isSet?angular.isFunction(t.onSuccess)&&t.onSuccess(i):s.get({},function(e){i.setFromResource(e),angular.isFunction(t.onSuccess)&&t.onSuccess(i)})}}}]);